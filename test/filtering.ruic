metadata 'MetaData.xml'

uia 'projects/SimpleScene/SimpleScene.uia'
show app.errors if app.errors?

main = app.main_presentation

assert main.find( type:'Model' ).length==4
assert main.find( type:'Model', slide:0 ).length==3
assert main.find( type:'Model', slide:1 ).length==4
assert main.find( type:'Model', slide:1, master:false ).length==1
assert main.find( type:'Model', attr:{position:[-150,60,0]} ).length==2
assert main.find( type:'Model', attr:{position:[-150,60,0]} ).length==2
assert main.find( type:'Model', attr:{position:[nil,60,nil]} ).length==4
assert main.find( type:'Model', attr:{sourcepath:'#Cube'} ).length==1
assert main.find( under:main/"Scene.Layer.Sphere1" ).length==1
assert main.find( attr:{name:'Material'} ).length==4
assert main.find( attr:{name:/^Sphere/} ).length==2

# You can use name not as an attribute
assert main.find( name:'Material' ).length==4
assert main.find( name:/^Sphere/ ).length==2

# Return values are in Scene graph order
assert main.find.first == main/"Scene"
assert main.find.last  == main/"Scene.Layer.NonMaster.Material"

# Any asset can be used as the 'root'
sphere = main/"Scene.Layer.Sphere1"
assert sphere.find.length==1

# Supplying a block will iterate, including the index
expected = main.find type:'Model'
found = 0
main.find type:'Model' do |mod,i|
	found += 1
	assert mod == expected[i]
end
assert found==4